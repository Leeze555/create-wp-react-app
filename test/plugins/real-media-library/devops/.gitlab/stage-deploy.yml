# Do your deployments here, for example upload builds to your license server and publish docs
rml docs deploy:
    extends: [.rml jobs, .only production, .lerna changes]
    stage: deploy
    dependencies: [release] # Always rely on "release" so ".lerna changes" works correctly
    script:
        - ls -la plugins/$JOB_PACKAGE_NAME/docs/

rml build deploy:
    extends: [.rml jobs, .only production, .lerna changes]
    stage: deploy
    dependencies: [release]
    script:
        - ls -la plugins/$JOB_PACKAGE_NAME/build/

# Publish the plugin changes to wordpress.org/plugins (not depending on lerna changes because it should simply reflect the complete SVN)
rml wordpress.org:
    extends: [.rml jobs, .rml only changes, .only production, .wordpress.org]
    variables:
        COPY_BUILD_FOLDER: real-media-library
    dependencies: [release, semver] # Here we need to rely on "semver" so the updated CHANGELOG.md and package.json is applied
